---
import BookLayout from "../../layouts/BookLayout.astro";
import { getCollection } from 'astro:content';
const chapters = await getCollection('chapters');
const ordered = chapters.sort((a,b)=> (a.data.order ?? 999) - (b.data.order ?? 999));
---
<BookLayout title="Read">
  <h1>Chapters</h1>
  <ul style="padding-left:1rem;">
    {ordered.map(c => (
      <li id={c.slug}><a href={`#${c.slug}`}>{c.data.title}</a> â€” {c.data.subtitle ?? ""}</li>
    ))}
  </ul>
  <hr />
  {ordered.map(c => (
    <article id={c.slug}>
      <h2>{c.data.title}</h2>
      {c.data.subtitle && <p style="color:var(--muted)">{c.data.subtitle}</p>}
      <c.Component />
      <hr />
    </article>
  ))}
</BookLayout>
