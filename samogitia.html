<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Samogitia — Military & Navy Evolution</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="assets/css/styles.css">
  <style>
    /* Page-specific styles for Samogitia evolution */
    .container{max-width:1000px;}
    .card{margin-bottom:1.5rem;}
    canvas{height:420px!important;}
  </style>
</head>
<body>
  <div id="nav-placeholder"></div>
  <script>
    fetch("nav.html")
      .then(r => r.text())
      .then(html => document.getElementById("nav-placeholder").innerHTML = html);
  </script>

  <header class="banner">
    <h1>Samogitia — Military & Navy Evolution</h1>
    <p>The first standing forces of Samogitia</p>
  </header>

  <main class="container">

    <!-- 1444 baseline -->
    <section class="card">
      <h2>Armies of 1444</h2>
      <table>
        <thead>
          <tr>
            <th>Army</th>
            <th>Commander</th>
            <th>Total</th>
            <th>Inf</th>
            <th>Cav</th>
            <th>Art</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Field Army (later “Iron Wolf”)</td>
            <td>Daugvilas Tyzenhaus</td>
            <td>6,000</td>
            <td>5,000</td>
            <td>1,000</td>
            <td>0</td>
          </tr>
        </tbody>
      </table>
      <p class="muted">A structured field army existed in 1444; it was formally named <em>Iron Wolf</em> in June 1445.</p>
    </section>

    <!-- 1445–1446 named armies -->
    <section class="card">
      <h2>Armies of 1445–1446</h2>
      <table>
        <thead>
          <tr>
            <th>Year</th>
            <th>Army</th>
            <th>Commander</th>
            <th>Total</th>
            <th>Inf</th>
            <th>Cav</th>
            <th>Art</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1445 (June)</td>
            <td>Iron Wolf</td>
            <td>Daugvilas Tyzenhaus</td>
            <td>10,000</td>
            <td>5,000</td>
            <td>3,000</td>
            <td>2,000</td>
          </tr>
          <tr>
            <td>1446 (Jan)</td>
            <td>Black Death</td>
            <td>Kantibutas Giedraiciai</td>
            <td>10,000</td>
            <td>5,000</td>
            <td>3,000</td>
            <td>2,000</td>
          </tr>
          <tr>
            <td colspan="3"><strong>1446 Combined Active Forces</strong></td>
            <td><strong>20,000</strong></td>
            <td><strong>10,000</strong></td>
            <td><strong>6,000</strong></td>
            <td><strong>4,000</strong></td>
          </tr>
        </tbody>
      </table>
      <p class="muted">Combined totals assume both Iron Wolf and Black Death were fielded simultaneously in 1446.</p>
    </section>

    <section class="card">
      <h2>Navy of 1444</h2>
      <p class="muted">Samogitia had no navy in 1444.</p>
    </section>

    <!-- NEW: Army totals chart -->
    <section class="card">
      <h2>Army Evolution — Total</h2>
      <canvas id="armyTotalsChart"></canvas>
      <p class="muted">Hover for yearly totals.</p>
    </section>

    <!-- NEW: Navy totals chart -->
    <section class="card">
      <h2>Navy Evolution — Total</h2>
      <canvas id="navyTotalsChart"></canvas>
      <p class="muted">Add 1451+ once ships are commissioned.</p>
    </section>

    <!-- Army breakdown chart -->
    <section class="card">
      <h2>Army Breakdown — Infantry / Cavalry / Artillery</h2>
      <canvas id="armyBreakdownChart"></canvas>
      <p class="muted">Shows branch composition per year.</p>
    </section>

    <!-- Navy breakdown chart -->
    <section class="card">
      <h2>Navy Breakdown — Heavy / Light / Galley / Transport</h2>
      <canvas id="navyBreakdownChart"></canvas>
      <p class="muted">Currently zero through 1446; extend when ships are commissioned (e.g., 1451+).</p>
    </section>

    <a class="back" href="index.html">← Back to Chronicle Index</a>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module">
    import { SAMOGITIA_BY_YEAR, SAMOGITIA_NAVY_BY_YEAR } from './assets/js/militaryData.js';
    const YEARS = Object.keys(SAMOGITIA_BY_YEAR);

    const ARMY_TOTALS = YEARS.map(y => {
      const d = SAMOGITIA_BY_YEAR[y];
      return d.inf + d.cav + d.art;
    });
    const NAVY_TOTALS = YEARS.map(y => {
      const d = SAMOGITIA_NAVY_BY_YEAR[y];
      return d.heavy + d.light + d.galley + d.trans;
    });

    const ARMY_INF = YEARS.map(y => SAMOGITIA_BY_YEAR[y].inf);
    const ARMY_CAV = YEARS.map(y => SAMOGITIA_BY_YEAR[y].cav);
    const ARMY_ART = YEARS.map(y => SAMOGITIA_BY_YEAR[y].art);

    const NAVY_HEAVY = YEARS.map(y => SAMOGITIA_NAVY_BY_YEAR[y].heavy);
    const NAVY_LIGHT = YEARS.map(y => SAMOGITIA_NAVY_BY_YEAR[y].light);
    const NAVY_GALLEY = YEARS.map(y => SAMOGITIA_NAVY_BY_YEAR[y].galley);
    const NAVY_TRANSPORT = YEARS.map(y => SAMOGITIA_NAVY_BY_YEAR[y].trans);

    // Helper colors
    const col = {
      armyTotal: "hsl(5,75%,45%)",
      navyTotal: "hsl(210,70%,40%)",
      inf: "hsl(10,70%,45%)",
      cav: "hsl(35,70%,45%)",
      art: "hsl(345,70%,45%)",
      heavy: "hsl(210,65%,40%)",
      light: "hsl(200,65%,42%)",
      galley: "hsl(220,65%,38%)",
      transport: "hsl(190,65%,44%)"
    };

    // Army totals chart
    const ctxArmyTotals = document.getElementById("armyTotalsChart").getContext("2d");
    new Chart(ctxArmyTotals,{
      type:"line",
      data:{
        labels:YEARS,
        datasets:[{
          label:"Army (total)",
          data:ARMY_TOTALS,
          borderColor:col.armyTotal,
          backgroundColor:"hsla(5,75%,70%,0.25)",
          tension:0.25,
          pointRadius:4
        }]
      },
      options:{responsive:true,plugins:{legend:{display:true}},scales:{y:{beginAtZero:true}}}
    });

    // Navy totals chart
    const ctxNavyTotals = document.getElementById("navyTotalsChart").getContext("2d");
    new Chart(ctxNavyTotals,{
      type:"line",
      data:{
        labels:YEARS,
        datasets:[{
          label:"Navy (total ships)",
          data:NAVY_TOTALS,
          borderColor:col.navyTotal,
          backgroundColor:"hsla(210,70%,68%,0.25)",
          tension:0.25,
          pointRadius:4
        }]
      },
      options:{responsive:true,plugins:{legend:{display:true}},scales:{y:{beginAtZero:true}}}
    });

    // Army breakdown chart
    const ctxArmy = document.getElementById("armyBreakdownChart").getContext("2d");
    new Chart(ctxArmy,{
      type:"line",
      data:{
        labels:YEARS,
        datasets:[
          { label:"Infantry",  data:ARMY_INF, borderColor:col.inf,  backgroundColor:"hsla(10,70%,70%,0.25)", tension:0.25, pointRadius:4 },
          { label:"Cavalry",   data:ARMY_CAV, borderColor:col.cav,  backgroundColor:"hsla(35,70%,70%,0.25)", tension:0.25, pointRadius:4 },
          { label:"Artillery", data:ARMY_ART, borderColor:col.art,  backgroundColor:"hsla(345,70%,70%,0.25)", tension:0.25, pointRadius:4 }
        ]
      },
      options:{responsive:true,plugins:{legend:{display:true}},scales:{y:{beginAtZero:true}}}
    });

    // Navy breakdown chart
    const ctxNavy = document.getElementById("navyBreakdownChart").getContext("2d");
    new Chart(ctxNavy,{
      type:"line",
      data:{
        labels:YEARS,
        datasets:[
          { label:"Heavy",     data:NAVY_HEAVY,     borderColor:col.heavy,     backgroundColor:"hsla(210,65%,70%,0.25)", tension:0.25, pointRadius:4 },
          { label:"Light",     data:NAVY_LIGHT,     borderColor:col.light,     backgroundColor:"hsla(200,65%,70%,0.25)", tension:0.25, pointRadius:4 },
          { label:"Galley",    data:NAVY_GALLEY,    borderColor:col.galley,    backgroundColor:"hsla(220,65%,70%,0.25)", tension:0.25, pointRadius:4 },
          { label:"Transport", data:NAVY_TRANSPORT, borderColor:col.transport, backgroundColor:"hsla(190,65%,70%,0.25)", tension:0.25, pointRadius:4 }
        ]
      },
      options:{responsive:true,plugins:{legend:{display:true}},scales:{y:{beginAtZero:true}}}
    });
  </script>
</body>
</html>
